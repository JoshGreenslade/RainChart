<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RainChart Module Example</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        #container {
            border: 2px solid #ccc;
            margin-bottom: 20px;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        button {
            padding: 8px 16px;
            cursor: pointer;
        }
        
        .info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 4px;
        }
        
        pre {
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>RainChart ES6 Module Example</h1>
    
    <div class="info">
        <p>This example demonstrates how to use RainChart as ES6 modules.</p>
        <p>Open the browser console and check the Network tab to see module loading.</p>
    </div>
    
    <h2>Simple Drawing Example</h2>
    <div class="controls">
        <button id="add-circle">Add Circle</button>
        <button id="add-line">Add Line</button>
        <button id="clear">Clear</button>
    </div>
    <div id="container"></div>
    
    <h2>Code Used</h2>
    <pre><code>// Import only what you need
import { BaseRenderer } from './js/rainchart.js';

// Create renderer
const renderer = new BaseRenderer('container', {
    width: 600,
    height: 400,
    renderMode: 'svg'
});

// Use it!
renderer.addCircle(300, 200, 50);</code></pre>
    
    <!-- Load D3 for SVG rendering -->
    <script src="lib/d3.v7.min.js"></script>
    
    <!-- ES6 Module Script -->
    <script type="module">
        // Import only what we need from the main module
        import { BaseRenderer } from './js/rainchart.js';
        
        // Create a renderer instance
        const renderer = new BaseRenderer('container', {
            width: 600,
            height: 400,
            renderMode: 'svg'
        });
        
        // Log to console to show it's working
        console.log('RainChart module loaded successfully!');
        console.log('Renderer:', renderer);
        
        // Add some initial content
        renderer.addCircle(100, 100, 30);
        renderer.addLine(50, 200, 550, 200);
        renderer.addRectangle(450, 50, 100, 80);
        
        // Setup button handlers
        document.getElementById('add-circle').addEventListener('click', () => {
            const x = Math.random() * 600;
            const y = Math.random() * 400;
            const radius = 20 + Math.random() * 40;
            renderer.addCircle(x, y, radius);
            console.log(`Added circle at (${x.toFixed(0)}, ${y.toFixed(0)}) with radius ${radius.toFixed(0)}`);
        });
        
        document.getElementById('add-line').addEventListener('click', () => {
            const x1 = Math.random() * 600;
            const y1 = Math.random() * 400;
            const x2 = Math.random() * 600;
            const y2 = Math.random() * 400;
            renderer.addLine(x1, y1, x2, y2);
            console.log(`Added line from (${x1.toFixed(0)}, ${y1.toFixed(0)}) to (${x2.toFixed(0)}, ${y2.toFixed(0)})`);
        });
        
        document.getElementById('clear').addEventListener('click', () => {
            renderer.clear();
            console.log('Cleared renderer');
        });
        
        // Make renderer available in console for experimentation
        window.renderer = renderer;
        console.log('Tip: Try "renderer.addCircle(300, 200, 50)" in the console!');
    </script>
</body>
</html>
